{
"$schema":"http://json-schema.org/draft-07/schema#",
"title":"Spack package configuration file schema",
"type":"object",
"additionalProperties":false,
"properties":{
"packages":{
"type":"object",
"default":{},
"properties":{
"all":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"require":{
"oneOf":[
{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"one_of":{
"type":"array",
"items":{
"type":"string"
}
},
"any_of":{
"type":"array",
"items":{
"type":"string"
}
},
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
{
"type":"string"
}
]
},
"prefer":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"conflict":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"target":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"compiler":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"buildable":{
"type":"boolean",
"default":true
},
"permissions":{
"type":"object",
"additionalProperties":false,
"properties":{
"read":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"write":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"group":{
"type":"string"
}
}
},
"package_attributes":{
"type":"object",
"additionalProperties":false,
"patternProperties":{
"\\w+":{}
}
},
"providers":{
"type":"object",
"default":{},
"additionalProperties":false,
"patternProperties":{
"\\w[\\w-]*":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
},
"variants":{
"oneOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"deprecatedProperties":[
{
"names":[
"compiler"
],
"message":"The packages:all:compiler preference has been deprecated in Spack v1.0, and is currently ignored. It will be removed from config in Spack v1.2.",
"error":false
}
]
}
},
"additionalProperties":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"require":{
"oneOf":[
{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"one_of":{
"type":"array",
"items":{
"type":"string"
}
},
"any_of":{
"type":"array",
"items":{
"type":"string"
}
},
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
{
"type":"string"
}
]
},
"prefer":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"conflict":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"version":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"buildable":{
"type":"boolean",
"default":true
},
"permissions":{
"type":"object",
"additionalProperties":false,
"properties":{
"read":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"write":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"group":{
"type":"string"
}
}
},
"package_attributes":{
"type":"object",
"additionalProperties":false,
"patternProperties":{
"\\w+":{}
}
},
"variants":{
"oneOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
},
"externals":{
"type":"array",
"items":{
"type":"object",
"properties":{
"spec":{
"type":"string"
},
"prefix":{
"type":"string"
},
"modules":{
"type":"array",
"items":{
"type":"string"
}
},
"extra_attributes":{
"type":"object",
"additionalProperties":{
"type":"string"
},
"properties":{
"compilers":{
"type":"object",
"patternProperties":{
"(^\\w[\\w-]*)":{
"type":"string"
}
}
},
"environment":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
},
"extra_rpaths":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"implicit_rpaths":{
"anyOf":[
{
"type":"array",
"items":{
"type":"string"
}
},
{
"type":"boolean"
}
]
},
"flags":{
"type":"object",
"additionalProperties":false,
"properties":{
"cflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"cxxflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"fflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"cppflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"ldflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"ldlibs":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
}
}
}
}
}
},
"additionalProperties":false,
"required":[
"spec"
]
}
}
}
}
}
}
}