{
"$schema":"http://json-schema.org/draft-07/schema#",
"title":"Spack environment file schema",
"type":"object",
"additionalProperties":false,
"properties":{
"spack":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"bootstrap":{
"type":"object",
"properties":{
"enable":{
"type":"boolean"
},
"root":{
"type":"string"
},
"sources":{
"type":"array",
"items":{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"metadata":{
"type":"string"
}
},
"additionalProperties":false,
"required":[
"name",
"metadata"
]
}
},
"trusted":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"type":"boolean"
}
}
}
}
},
"cdash":{
"type":"object",
"additionalProperties":false,
"required":[
"build-group"
],
"patternProperties":{
"build-group":{
"type":"string"
},
"url":{
"type":"string"
},
"project":{
"type":"string"
},
"site":{
"type":"string"
}
}
},
"compilers":{
"type":"array",
"items":{
"type":"object",
"additionalProperties":false,
"properties":{
"compiler":{
"type":"object",
"additionalProperties":false,
"required":[
"paths",
"spec",
"modules",
"operating_system"
],
"properties":{
"paths":{
"type":"object",
"required":[
"cc",
"cxx",
"f77",
"fc"
],
"additionalProperties":false,
"properties":{
"cc":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"cxx":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"f77":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"fc":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
}
}
},
"flags":{
"type":"object",
"additionalProperties":false,
"properties":{
"cflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"cxxflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"fflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"cppflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"ldflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"ldlibs":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
}
}
},
"spec":{
"type":"string"
},
"operating_system":{
"type":"string"
},
"target":{
"type":"string"
},
"alias":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"modules":{
"anyOf":[
{
"type":"null"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
},
"implicit_rpaths":{
"anyOf":[
{
"type":"array",
"items":{
"type":"string"
}
},
{
"type":"boolean"
}
]
},
"environment":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
},
"extra_rpaths":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
}
}
}
},
"concretizer":{
"type":"object",
"additionalProperties":false,
"properties":{
"force":{
"type":"boolean",
"default":false
},
"reuse":{
"oneOf":[
{
"type":"boolean"
},
{
"type":"string",
"enum":[
"dependencies"
]
},
{
"type":"object",
"properties":{
"roots":{
"type":"boolean"
},
"include":{
"type":"array",
"items":{
"type":"string"
}
},
"exclude":{
"type":"array",
"items":{
"type":"string"
}
},
"from":{
"type":"array",
"items":{
"type":"object",
"properties":{
"type":{
"type":"string",
"enum":[
"local",
"buildcache",
"external",
"environment"
]
},
"path":{
"type":"string"
},
"include":{
"type":"array",
"items":{
"type":"string"
}
},
"exclude":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
}
}
}
]
},
"enable_node_namespace":{
"type":"boolean"
},
"targets":{
"type":"object",
"properties":{
"host_compatible":{
"type":"boolean"
},
"granularity":{
"type":"string",
"enum":[
"generic",
"microarchitectures"
]
}
}
},
"unify":{
"oneOf":[
{
"type":"boolean"
},
{
"type":"string",
"enum":[
"when_possible"
]
}
]
},
"splice":{
"type":"object",
"additionalProperties":false,
"properties":{
"explicit":{
"type":"array",
"default":[],
"items":{
"type":"object",
"required":[
"target",
"replacement"
],
"additionalProperties":false,
"properties":{
"target":{
"type":"string"
},
"replacement":{
"type":"string"
},
"transitive":{
"type":"boolean",
"default":false
}
}
}
},
"automatic":{
"type":"boolean"
}
}
},
"duplicates":{
"type":"object",
"properties":{
"strategy":{
"type":"string",
"enum":[
"none",
"minimal",
"full"
]
},
"max_dupes":{
"type":"object",
"additional_properties":{
"type":"integer",
"minimum":1
}
}
}
},
"static_analysis":{
"type":"boolean"
},
"timeout":{
"type":"integer",
"minimum":0
},
"error_on_timeout":{
"type":"boolean"
},
"os_compatible":{
"type":"object",
"additionalProperties":{
"type":"array"
}
}
}
},
"config":{
"type":"object",
"default":{},
"properties":{
"flags":{
"type":"object",
"properties":{
"keep_werror":{
"type":"string",
"enum":[
"all",
"specific",
"none"
]
}
}
},
"shared_linking":{
"anyOf":[
{
"type":"string",
"enum":[
"rpath",
"runpath"
]
},
{
"type":"object",
"properties":{
"type":{
"type":"string",
"enum":[
"rpath",
"runpath"
]
},
"bind":{
"type":"boolean"
},
"missing_library_policy":{
"enum":[
"error",
"warn",
"ignore"
]
}
}
}
]
},
"install_tree":{
"anyOf":[
{
"type":"object",
"properties":{
"root":{
"type":"string"
},
"padded_length":{
"oneOf":[
{
"type":"integer",
"minimum":0
},
{
"type":"boolean"
}
]
},
"projections":{
"type":"object",
"patternProperties":{
"all|\\w[\\w-]*":{
"type":"string"
}
}
}
}
},
{
"type":"string"
}
]
},
"concretization_cache":{
"type":"object",
"properties":{
"enable":{
"type":"boolean"
},
"url":{
"type":"string"
},
"entry_limit":{
"type":"integer",
"minimum":0
},
"size_limit":{
"type":"integer",
"minimum":0
}
}
},
"install_hash_length":{
"type":"integer",
"minimum":1
},
"install_path_scheme":{
"type":"string"
},
"build_stage":{
"oneOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
},
"stage_name":{
"type":"string"
},
"develop_stage_link":{
"type":"string"
},
"test_stage":{
"type":"string"
},
"extensions":{
"type":"array",
"items":{
"type":"string"
}
},
"template_dirs":{
"type":"array",
"items":{
"type":"string"
}
},
"license_dir":{
"type":"string"
},
"source_cache":{
"type":"string"
},
"misc_cache":{
"type":"string"
},
"environments_root":{
"type":"string"
},
"connect_timeout":{
"type":"integer",
"minimum":0
},
"verify_ssl":{
"type":"boolean"
},
"ssl_certs":{
"type":"string"
},
"suppress_gpg_warnings":{
"type":"boolean"
},
"debug":{
"type":"boolean"
},
"checksum":{
"type":"boolean"
},
"deprecated":{
"type":"boolean"
},
"locks":{
"type":"boolean"
},
"dirty":{
"type":"boolean"
},
"build_language":{
"type":"string"
},
"build_jobs":{
"type":"integer",
"minimum":1
},
"concurrent_packages":{
"type":"integer",
"minimum:":1
},
"ccache":{
"type":"boolean"
},
"db_lock_timeout":{
"type":"integer",
"minimum":1
},
"package_lock_timeout":{
"anyOf":[
{
"type":"integer",
"minimum":1
},
{
"type":"null"
}
]
},
"allow_sgid":{
"type":"boolean"
},
"install_status":{
"type":"boolean"
},
"binary_index_root":{
"type":"string"
},
"url_fetch_method":{
"type":"string",
"pattern":"^urllib$|^curl( .*)*"
},
"additional_external_search_paths":{
"type":"array",
"items":{
"type":"string"
}
},
"binary_index_ttl":{
"type":"integer",
"minimum":0
},
"aliases":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"type":"string"
}
}
}
},
"deprecatedProperties":[
{
"names":[
"concretizer"
],
"message":"Spack supports only clingo as a concretizer from v0.23. The config:concretizer config option is ignored.",
"error":false
},
{
"names":[
"install_missing_compilers"
],
"message":"The config:install_missing_compilers option has been deprecated in Spack v0.23, and is currently ignored. It will be removed from config in Spack v1.0.",
"error":false
},
{
"names":[
"install_path_scheme"
],
"message":"The config:install_path_scheme option was deprecated in Spack v0.16 in favor of config:install_tree:projections:all. It will be removed in Spack v1.0.",
"error":false
}
]
},
"container":{
"type":"object",
"additionalProperties":false,
"properties":{
"format":{
"type":"string",
"enum":[
"docker",
"singularity"
]
},
"images":{
"anyOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"os":{
"type":"string"
},
"spack":{
"anyOf":[
{
"type":"string"
},
{
"type":"object",
"additional_properties":false,
"properties":{
"url":{
"type":"string"
},
"ref":{
"type":"string"
},
"resolve_sha":{
"type":"boolean",
"default":false
},
"verify":{
"type":"boolean",
"default":false
}
}
}
]
}
},
"required":[
"os",
"spack"
]
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"build":{
"type":"string"
},
"final":{
"type":"string"
}
},
"required":[
"build",
"final"
]
}
]
},
"strip":{
"type":"boolean",
"default":true
},
"os_packages":{
"type":"object",
"properties":{
"command":{
"type":"string",
"enum":[
"apt",
"yum",
"zypper",
"apk",
"yum_amazon"
]
},
"update":{
"type":"boolean"
},
"build":{
"type":"array",
"items":{
"type":"string"
}
},
"final":{
"type":"array",
"items":{
"type":"string"
}
}
},
"additionalProperties":false
},
"labels":{
"type":"object"
},
"template":{
"type":"string",
"default":null
},
"singularity":{
"type":"object",
"additionalProperties":false,
"default":{},
"properties":{
"runscript":{
"type":"string"
},
"startscript":{
"type":"string"
},
"test":{
"type":"string"
},
"help":{
"type":"string"
}
}
},
"docker":{
"type":"object",
"additionalProperties":false,
"default":{}
},
"depfile":{
"type":"boolean",
"default":false
}
}
},
"ci":{
"pipeline-gen":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"required":[
"submapping"
],
"properties":{
"match_behavior":{
"type":"string",
"enum":[
"first",
"merge"
],
"default":"first"
},
"submapping":{
"type":"array",
"items":{
"type":"object",
"additionalProperties":false,
"required":[
"match"
],
"properties":{
"match":{
"type":"array",
"items":{
"type":"string"
}
},
"build-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"build-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"required":[
"dynamic-mapping"
],
"properties":{
"dynamic-mapping":{
"type":"object",
"required":[
"endpoint"
],
"properties":{
"name":{
"type":"string"
},
"endpoint":{
"type":"string"
},
"timeout":{
"type":"integer",
"minimum":0
},
"verify_ssl":{
"type":"boolean",
"default":false
},
"header":{
"type":"object",
"additionalProperties":false
},
"allow":{
"type":"array",
"items":{
"type":"string"
}
},
"require":{
"type":"array",
"items":{
"type":"string"
}
},
"ignore":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"any-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"any-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"build-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"build-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"cleanup-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"cleanup-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"copy-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"copy-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"noop-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"noop-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"reindex-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"reindex-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"signing-job":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
},
"signing-job-remove":{
"type":"object",
"additionalProperties":true,
"properties":{
"image":{
"oneOf":[
{
"type":"string"
},
{
"type":"object",
"properties":{
"name":{
"type":"string"
},
"entrypoint":{
"type":"array",
"items":{
"type":"string"
}
}
}
}
]
},
"tags":{
"type":"array",
"items":{
"type":"string"
}
},
"variables":{
"type":"object",
"patternProperties":{
"[\\w\\d\\-_\\.]+":{
"type":[
"string",
"number"
]
}
}
},
"before_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"after_script":{
"type":"array",
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
}
}
}
}
}
]
}
},
"rebuild-index":{
"type":"boolean"
},
"broken-specs-url":{
"type":"string"
},
"broken-tests-packages":{
"type":"array",
"items":{
"type":"string"
}
},
"target":{
"type":"string",
"enum":[
"gitlab"
],
"default":"gitlab"
}
},
"definitions":{
"type":"array",
"default":[],
"items":{
"type":"object",
"properties":{
"when":{
"type":"string"
}
},
"additionalProperties":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"matrix":{
"type":"array",
"items":{
"type":"array",
"items":{
"type":"string"
}
}
},
"exclude":{
"type":"array",
"items":{
"type":"string"
}
}
}
},
{
"type":"string"
},
{
"type":"null"
}
]
}
}
}
},
"develop":{
"type":"object",
"default":{},
"additionalProperties":false,
"patternProperties":{
"\\w[\\w-]*":{
"type":"object",
"additionalProperties":false,
"required":[
"spec"
],
"properties":{
"spec":{
"type":"string"
},
"path":{
"type":"string"
}
}
}
}
},
"env_vars":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
},
"include":{
"type":"array",
"default":[],
"additionalProperties":false,
"items":{
"anyOf":[
{
"type":"object",
"properties":{
"when":{
"type":"string"
},
"path":{
"type":"string"
},
"sha256":{
"type":"string"
},
"optional":{
"type":"boolean"
}
},
"required":[
"path"
],
"additionalProperties":false
},
{
"type":"string"
}
]
}
},
"mirrors":{
"type":"object",
"default":{},
"additionalProperties":false,
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"object",
"additionalProperties":false,
"anyOf":[
{
"required":[
"url"
]
},
{
"required":[
"fetch"
]
},
{
"required":[
"pull"
]
}
],
"properties":{
"source":{
"type":"boolean"
},
"binary":{
"type":"boolean"
},
"signed":{
"type":"boolean"
},
"fetch":{
"anyOf":[
{
"type":"string"
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"url":{
"type":"string"
},
"access_pair":{
"oneOf":[
{
"type":"array",
"items":{
"minItems":2,
"maxItems":2,
"type":[
"string",
"null"
]
}
},
{
"type":"object",
"required":[
"secret_variable"
],
"oneOf":[
{
"required":[
"id"
]
},
{
"required":[
"id_variable"
]
}
],
"properties":{
"id":{
"type":"string"
},
"id_variable":{
"type":"string"
},
"secret_variable":{
"type":"string"
}
}
}
]
},
"profile":{
"type":[
"string",
"null"
]
},
"endpoint_url":{
"type":[
"string",
"null"
]
},
"access_token":{
"type":[
"string",
"null"
]
},
"access_token_variable":{
"type":[
"string",
"null"
]
}
},
"deprecatedProperties":[
{
"names":[
"access_token"
],
"message":"Use of plain text `access_token` in mirror config is deprecated, use environment variables instead (access_token_variable)",
"error":false
}
]
}
]
},
"push":{
"anyOf":[
{
"type":"string"
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"url":{
"type":"string"
},
"access_pair":{
"oneOf":[
{
"type":"array",
"items":{
"minItems":2,
"maxItems":2,
"type":[
"string",
"null"
]
}
},
{
"type":"object",
"required":[
"secret_variable"
],
"oneOf":[
{
"required":[
"id"
]
},
{
"required":[
"id_variable"
]
}
],
"properties":{
"id":{
"type":"string"
},
"id_variable":{
"type":"string"
},
"secret_variable":{
"type":"string"
}
}
}
]
},
"profile":{
"type":[
"string",
"null"
]
},
"endpoint_url":{
"type":[
"string",
"null"
]
},
"access_token":{
"type":[
"string",
"null"
]
},
"access_token_variable":{
"type":[
"string",
"null"
]
}
},
"deprecatedProperties":[
{
"names":[
"access_token"
],
"message":"Use of plain text `access_token` in mirror config is deprecated, use environment variables instead (access_token_variable)",
"error":false
}
]
}
]
},
"autopush":{
"type":"boolean"
},
"url":{
"type":"string"
},
"access_pair":{
"oneOf":[
{
"type":"array",
"items":{
"minItems":2,
"maxItems":2,
"type":[
"string",
"null"
]
}
},
{
"type":"object",
"required":[
"secret_variable"
],
"oneOf":[
{
"required":[
"id"
]
},
{
"required":[
"id_variable"
]
}
],
"properties":{
"id":{
"type":"string"
},
"id_variable":{
"type":"string"
},
"secret_variable":{
"type":"string"
}
}
}
]
},
"profile":{
"type":[
"string",
"null"
]
},
"endpoint_url":{
"type":[
"string",
"null"
]
},
"access_token":{
"type":[
"string",
"null"
]
},
"access_token_variable":{
"type":[
"string",
"null"
]
}
},
"deprecatedProperties":[
{
"names":[
"access_token"
],
"message":"Use of plain text `access_token` in mirror config is deprecated, use environment variables instead (access_token_variable)",
"error":false
}
]
}
]
}
}
},
"modules":{
"type":"object",
"properties":{
"prefix_inspections":{
"type":"object",
"additionalProperties":false,
"patternProperties":{
"^[\\w-]*":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
}
},
"additionalProperties":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"use_view":{
"anyOf":[
{
"type":"string"
},
{
"type":"boolean"
}
]
},
"arch_folder":{
"type":"boolean"
},
"roots":{
"type":"object",
"properties":{
"tcl":{
"type":"string"
},
"lmod":{
"type":"string"
}
}
},
"enable":{
"type":"array",
"default":[],
"items":{
"type":"string",
"enum":[
"tcl",
"lmod"
]
}
},
"lmod":{
"type":"object",
"default":{},
"additionalKeysAreSpecs":true,
"properties":{
"verbose":{
"type":"boolean",
"default":false
},
"hash_length":{
"type":"integer",
"minimum":0,
"default":7
},
"include":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"exclude":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"exclude_implicits":{
"type":"boolean",
"default":false
},
"defaults":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"hide_implicits":{
"type":"boolean",
"default":false
},
"naming_scheme":{
"type":"string"
},
"projections":{
"type":"object",
"patternProperties":{
"all|\\w[\\w-]*":{
"type":"string"
}
}
},
"all":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"filter":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"exclude_env_vars":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
},
"template":{
"type":"string"
},
"autoload":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"prerequisites":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"conflict":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"load":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"suffixes":{
"type":"object",
"additionalKeysAreSpecs":true,
"additionalProperties":{
"type":"string"
}
},
"environment":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
}
}
},
"core_compilers":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"hierarchy":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"core_specs":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"filter_hierarchy_specs":{
"type":"object",
"additionalKeysAreSpecs":true,
"additionalProperties":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
},
"additionalProperties":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"filter":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"exclude_env_vars":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
},
"template":{
"type":"string"
},
"autoload":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"prerequisites":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"conflict":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"load":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"suffixes":{
"type":"object",
"additionalKeysAreSpecs":true,
"additionalProperties":{
"type":"string"
}
},
"environment":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
}
}
}
},
"tcl":{
"type":"object",
"default":{},
"additionalKeysAreSpecs":true,
"properties":{
"verbose":{
"type":"boolean",
"default":false
},
"hash_length":{
"type":"integer",
"minimum":0,
"default":7
},
"include":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"exclude":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"exclude_implicits":{
"type":"boolean",
"default":false
},
"defaults":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"hide_implicits":{
"type":"boolean",
"default":false
},
"naming_scheme":{
"type":"string"
},
"projections":{
"type":"object",
"patternProperties":{
"all|\\w[\\w-]*":{
"type":"string"
}
}
},
"all":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"filter":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"exclude_env_vars":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
},
"template":{
"type":"string"
},
"autoload":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"prerequisites":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"conflict":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"load":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"suffixes":{
"type":"object",
"additionalKeysAreSpecs":true,
"additionalProperties":{
"type":"string"
}
},
"environment":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
}
}
}
},
"additionalProperties":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"filter":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"exclude_env_vars":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
},
"template":{
"type":"string"
},
"autoload":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"prerequisites":{
"type":"string",
"enum":[
"none",
"run",
"direct",
"all"
]
},
"conflict":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"load":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"suffixes":{
"type":"object",
"additionalKeysAreSpecs":true,
"additionalProperties":{
"type":"string"
}
},
"environment":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
}
}
}
},
"prefix_inspections":{
"type":"object",
"additionalProperties":false,
"patternProperties":{
"^[\\w-]*":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
}
}
}
},
"packages":{
"type":"object",
"default":{},
"properties":{
"all":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"require":{
"oneOf":[
{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"one_of":{
"type":"array",
"items":{
"type":"string"
}
},
"any_of":{
"type":"array",
"items":{
"type":"string"
}
},
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
{
"type":"string"
}
]
},
"prefer":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"conflict":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"target":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"compiler":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"buildable":{
"type":"boolean",
"default":true
},
"permissions":{
"type":"object",
"additionalProperties":false,
"properties":{
"read":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"write":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"group":{
"type":"string"
}
}
},
"package_attributes":{
"type":"object",
"additionalProperties":false,
"patternProperties":{
"\\w+":{}
}
},
"providers":{
"type":"object",
"default":{},
"additionalProperties":false,
"patternProperties":{
"\\w[\\w-]*":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
},
"variants":{
"oneOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
}
},
"deprecatedProperties":[
{
"names":[
"compiler"
],
"message":"The packages:all:compiler preference has been deprecated in Spack v1.0, and is currently ignored. It will be removed from config in Spack v1.2.",
"error":false
}
]
}
},
"additionalProperties":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"require":{
"oneOf":[
{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"one_of":{
"type":"array",
"items":{
"type":"string"
}
},
"any_of":{
"type":"array",
"items":{
"type":"string"
}
},
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
{
"type":"string"
}
]
},
"prefer":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"conflict":{
"type":"array",
"items":{
"oneOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"spec":{
"type":"string"
},
"message":{
"type":"string"
},
"when":{
"type":"string"
}
}
},
{
"type":"string"
}
]
}
},
"version":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"buildable":{
"type":"boolean",
"default":true
},
"permissions":{
"type":"object",
"additionalProperties":false,
"properties":{
"read":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"write":{
"type":"string",
"enum":[
"user",
"group",
"world"
]
},
"group":{
"type":"string"
}
}
},
"package_attributes":{
"type":"object",
"additionalProperties":false,
"patternProperties":{
"\\w+":{}
}
},
"variants":{
"oneOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"string"
}
}
]
},
"externals":{
"type":"array",
"items":{
"type":"object",
"properties":{
"spec":{
"type":"string"
},
"prefix":{
"type":"string"
},
"modules":{
"type":"array",
"items":{
"type":"string"
}
},
"extra_attributes":{
"type":"object",
"additionalProperties":{
"type":"string"
},
"properties":{
"compilers":{
"type":"object",
"patternProperties":{
"(^\\w[\\w-]*)":{
"type":"string"
}
}
},
"environment":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"set":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"unset":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
},
"prepend_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"append_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
},
"remove_path":{
"type":"object",
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"number"
}
]
}
}
}
}
},
"extra_rpaths":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
},
"implicit_rpaths":{
"anyOf":[
{
"type":"array",
"items":{
"type":"string"
}
},
{
"type":"boolean"
}
]
},
"flags":{
"type":"object",
"additionalProperties":false,
"properties":{
"cflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"cxxflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"fflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"cppflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"ldflags":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
},
"ldlibs":{
"anyOf":[
{
"type":"string"
},
{
"type":"null"
}
]
}
}
}
}
}
},
"additionalProperties":true,
"required":[
"spec"
]
}
}
}
}
},
"repos":{
"oneOf":[
{
"type":"array",
"items":{
"type":"string",
"description":"Path to a Spack package repository directory"
}
},
{
"type":"object",
"additionalProperties":{
"oneOf":[
{
"type":"string",
"description":"Path to a Spack package repository directory"
},
{
"type":"object",
"properties":{
"git":{
"type":"string"
},
"branch":{
"type":"string"
},
"commit":{
"type":"string"
},
"tag":{
"type":"string"
},
"destination":{
"type":"string"
},
"paths":{
"type":"array",
"items":{
"type":"string"
}
}
},
"additionalProperties":false
}
]
}
}
],
"default":{}
},
"toolchains":{
"type":"object",
"default":{},
"additionalProperties":{
"oneOf":[
{
"type":"string"
},
{
"type":"array",
"items":{
"type":"object",
"properties":{
"spec":{
"type":"string"
},
"when":{
"type":"string"
}
}
}
}
]
}
},
"upstreams":{
"type":"object",
"default":{},
"patternProperties":{
"\\w[\\w-]*":{
"type":"object",
"default":{},
"additionalProperties":false,
"properties":{
"install_tree":{
"type":"string"
},
"modules":{
"type":"object",
"properties":{
"tcl":{
"type":"string"
},
"lmod":{
"type":"string"
}
}
}
}
}
}
},
"view":{
"anyOf":[
{
"type":"boolean"
},
{
"type":"string"
},
{
"type":"object",
"patternProperties":{
"\\w+":{
"required":[
"root"
],
"additionalProperties":false,
"properties":{
"root":{
"type":"string"
},
"link":{
"type":"string",
"pattern":"(roots|all|run)"
},
"link_type":{
"type":"string"
},
"select":{
"type":"array",
"items":{
"type":"string"
}
},
"exclude":{
"type":"array",
"items":{
"type":"string"
}
},
"projections":{
"type":"object",
"patternProperties":{
"all|\\w[\\w-]*":{
"type":"string"
}
}
}
}
}
}
}
]
},
"specs":{
"type":"array",
"default":[],
"items":{
"anyOf":[
{
"type":"object",
"additionalProperties":false,
"properties":{
"matrix":{
"type":"array",
"items":{
"type":"array",
"items":{
"type":"string"
}
}
},
"exclude":{
"type":"array",
"items":{
"type":"string"
}
}
}
},
{
"type":"string"
},
{
"type":"null"
}
]
}
},
"include_concrete":{
"type":"array",
"default":[],
"items":{
"type":"string"
}
}
}
}
}
}