{
"$schema":"http://json-schema.org/draft-07/schema#",
"title":"Spack mirror configuration file schema",
"type":"object",
"additionalProperties":false,
"properties":{
"mirrors":{
"type":"object",
"default":{},
"additionalProperties":false,
"patternProperties":{
"\\w[\\w-]*":{
"anyOf":[
{
"type":"string"
},
{
"type":"object",
"additionalProperties":false,
"anyOf":[
{
"required":[
"url"
]
},
{
"required":[
"fetch"
]
},
{
"required":[
"pull"
]
}
],
"properties":{
"source":{
"type":"boolean"
},
"binary":{
"type":"boolean"
},
"signed":{
"type":"boolean"
},
"fetch":{
"anyOf":[
{
"type":"string"
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"url":{
"type":"string"
},
"access_pair":{
"type":"object",
"required":[
"secret_variable"
],
"oneOf":[
{
"required":[
"id"
]
},
{
"required":[
"id_variable"
]
}
],
"properties":{
"id":{
"type":"string"
},
"id_variable":{
"type":"string"
},
"secret_variable":{
"type":"string"
}
}
},
"profile":{
"type":[
"string",
"null"
]
},
"endpoint_url":{
"type":[
"string",
"null"
]
},
"access_token_variable":{
"type":[
"string",
"null"
]
}
}
}
]
},
"push":{
"anyOf":[
{
"type":"string"
},
{
"type":"object",
"additionalProperties":false,
"properties":{
"url":{
"type":"string"
},
"access_pair":{
"type":"object",
"required":[
"secret_variable"
],
"oneOf":[
{
"required":[
"id"
]
},
{
"required":[
"id_variable"
]
}
],
"properties":{
"id":{
"type":"string"
},
"id_variable":{
"type":"string"
},
"secret_variable":{
"type":"string"
}
}
},
"profile":{
"type":[
"string",
"null"
]
},
"endpoint_url":{
"type":[
"string",
"null"
]
},
"access_token_variable":{
"type":[
"string",
"null"
]
}
}
}
]
},
"autopush":{
"type":"boolean"
},
"url":{
"type":"string"
},
"access_pair":{
"type":"object",
"required":[
"secret_variable"
],
"oneOf":[
{
"required":[
"id"
]
},
{
"required":[
"id_variable"
]
}
],
"properties":{
"id":{
"type":"string"
},
"id_variable":{
"type":"string"
},
"secret_variable":{
"type":"string"
}
}
},
"profile":{
"type":[
"string",
"null"
]
},
"endpoint_url":{
"type":[
"string",
"null"
]
},
"access_token_variable":{
"type":[
"string",
"null"
]
}
}
}
]
}
}
}
}
}